<div class="component-frame">
  <div class="component-frame-main">
    <ddap-dot-loading-indicator *ngIf="!dataTableModel; else withResult"></ddap-dot-loading-indicator>
    <ng-template #withResult>
      <ddap-data-table [columnDefs]="dataTableModel.columnDefs"
                       [rowData]="dataTableModel.rowData">
      </ddap-data-table>
    </ng-template>
  </div>
  <aside class="component-frame-aside">
    <ddap-dot-loading-indicator *ngIf="!filterForm; else withFilterForm"></ddap-dot-loading-indicator>
    <ng-template #withFilterForm>
      <form [formGroup]="this.filterForm" (ngSubmit)="onFilterFormSubmit()">
        <div *ngFor="let columnDef of dataTableModel.columnDefs"
             class="flex flex--row">
          <!-- Operation -->
          <mat-form-field appearance="outline"
                          class="operation-inp">
            <mat-select [formControlName]="columnDef.field + fieldOpSuffix">
              <mat-option *ngFor="let operation of getOperationsByFieldName(columnDef.field)"
                          [value]="operation">
                {{ operation }}
              </mat-option>
            </mat-select>
          </mat-form-field>
          <!-- Value -->
          <mat-form-field appearance="outline"
                          floatLabel="always">
            <mat-label>{{ columnDef.headerName }}</mat-label>
            <input matInput
                   [formControlName]="columnDef.field">
          </mat-form-field>
        </div>
        <div>
          <button type="submit"
                  mat-flat-button
                  color="primary">
            Filter
          </button>
        </div>
      </form>
    </ng-template>
  </aside>
</div>
