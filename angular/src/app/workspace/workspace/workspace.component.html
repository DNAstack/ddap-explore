<div [class.standalone-mode]="inStandaloneMode"
     class="component-frame app-level">
  <!-- Active Resource View -->
  <div class="component-frame-main">
    <!-- View Title -->
    <mat-toolbar class="tertiary-toolbar">
      <mat-toolbar-row *ngIf="collection"
                       class="active-resource-header">
        <!--
          Secondary resource menu
          It is designed to only work in the table mode.
        -->
        <div class="collection-name">
          {{ collection.name }}
        </div>

        <!-- Resource menu (only available in the mobile mode) -->
        <div class="secondary-resource-menu-trigger">
          <button [matMenuTriggerFor]="secondaryResourceMenu"
                  mat-icon-button>
            <mat-icon>keyboard_arrow_down</mat-icon>
          </button>

          <mat-menu #secondaryResourceMenu="matMenu">
            <button *ngFor="let resource of beaconResources"
                    [routerLink]="[getBaseUrl(), getCollectionId(), 'beacon', resource.id]"
                    routerLinkActive="active"
                    mat-menu-item>
              <mat-icon>{{ resource.metadata.iconName }}</mat-icon>
              <span class="resource-name">{{ beaconResources.length === 1 ? 'Beacon' : resource.name }}</span>
            </button>
            <button *ngFor="let resource of simpleSearchResources"
                    [routerLink]="[getBaseUrl(), getCollectionId(), 'simple-search', resource.id]"
                    routerLinkActive="active"
                    mat-menu-item>
              <mat-icon>{{ resource.metadata.iconName }}</mat-icon>
              <span class="resource-name">{{ resource.name }}</span>
            </button>
          </mat-menu>
        </div>

        <div *ngIf="getResourceType() === 'beacon'"
             class="selected-resource-name">
          <span *ngIf="activeBeaconResource">
            <!-- TODO: should be proper beacon name and if not possible fallback to resource name (see beacon-search component) -->
            {{ beaconResources.length === 1 ? 'Beacon' : activeBeaconResource.name }}
          </span>
        </div>

        <div *ngIf="getResourceType() === 'simple-search' && activeSimpleSearchResource"
             class="selected-resource-name">
          <span>
            {{ activeSimpleSearchResource.name }}
          </span>
        </div>

        <div class="fill-space"></div>

        <button *ngIf="getResourceType() === 'beacon'"
                (click)="openHelpDialog()"
                mat-icon-button
                matTooltip="Help">
          <mat-icon>help_outline</mat-icon>
        </button>
      </mat-toolbar-row>
    </mat-toolbar>

    <!-- Beacon View -->
    <ng-container *ngIf="getActiveResource()?.type === 'beacon'">
      <ddap-beacon-search [resourceId]="getResourceId()"></ddap-beacon-search>
    </ng-container>

    <!-- Simple Search View -->
    <ng-container *ngIf="getActiveResource()?.type === 'simple-search'">
      <ddap-simple-search [resourceId]="getResourceId()"></ddap-simple-search>
    </ng-container>
  </div>

  <!-- Resource List -->
  <aside class="component-frame-aside">
    <mat-toolbar class="tertiary-toolbar">
      <ng-container *ngIf="inStandaloneMode === undefined">
        <mat-toolbar-row class="aside-navigator nothing">
          <mat-icon>origin</mat-icon>
          <span *ngIf="collection"
                class="aside-navigator-label">
            {{ collection.name }}
          </span>
        </mat-toolbar-row>
      </ng-container>
      <ng-container *ngIf="inStandaloneMode === true">
        <mat-toolbar-row *ngIf="collection"
                         class="aside-navigator reload"
                         matRipple
                         [routerLink]="[getBaseUrl(), getCollectionId()]">
          <mat-icon>cloud</mat-icon>
          <span *ngIf="collection"
                class="aside-navigator-label">
            {{ collection.name }}
          </span>
        </mat-toolbar-row>
      </ng-container>
      <ng-container *ngIf="inStandaloneMode === false">
        <mat-toolbar-row *ngIf="collection"
                         class="aside-navigator back-navigator"
                         matRipple
                         [routerLink]="[getBaseUrl(), 'all']">
          <mat-icon>arrow_back</mat-icon>
          <span class="aside-navigator-label">Collections</span>
        </mat-toolbar-row>
      </ng-container>
    </mat-toolbar>

    <div class="resource-list-container beacons"
         *ngIf="beaconResources && beaconResources.length > 0">
      <h2>Beacons</h2>
      <div class="menu-list resource-list">
        <ng-container *ngFor="let beacon of beaconResources">
          <a matRipple
             [routerLink]="[getBaseUrl(), getCollectionId(), 'beacon', beacon.id]"
             class="menu-item with-icon resource"
             routerLinkActive="active">
            <mat-icon>{{ beacon.metadata.iconName }}</mat-icon>
            <span
              class="menu-item-label resource-name">{{ beaconResources.length === 1 ? 'Beacon' : beacon.name }}</span>
          </a>
        </ng-container>
      </div>
    </div>

    <div class="resource-list-container simple-searches"
         *ngIf="simpleSearchResources && simpleSearchResources.length > 0">
      <h2>Simple Searches</h2>
      <div class="menu-list resource-list">
        <ng-container *ngFor="let searchSimple of simpleSearchResources">
          <a matRipple
             [routerLink]="[getBaseUrl(), getCollectionId(), 'simple-search', searchSimple.id]"
             class="menu-item with-icon resource"
             routerLinkActive="active">
            <mat-icon>{{ searchSimple.metadata.iconName }}</mat-icon>
            <span class="menu-item-label resource-name">{{ searchSimple.name }}</span>
          </a>
        </ng-container>
      </div>
    </div>
  </aside>
</div>
