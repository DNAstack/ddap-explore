databaseChangeLog:
  - changeSet:
      id: 1
      author: Patrick Magee
      changes:
        - createTable:
            tableName: sessions
            columns:
              - column:
                  name: principal_id
                  type: varchar
                  constraints:
                    nullable: false
                  remarks: |-
                      The Unique Id tied to this user access, potentially spanning multiple sessions
              - column:
                  name: session_id
                  type: varchar
                  constraints:
                    nullable: false
                  remarks: |-
                    The Session id
              - column:
                  name: last_accessed_time
                  type: timestamp
                  remarks: the last time this session was accessed
              - column:
                  name: creation_time
                  type: timestamp
                  remarks: the time this session was first created
              - column:
                  name: max_inactive_interval
                  type: interval
                  remarks: the maximum interval of time to keep this session valid
              - column:
                  name: attributes
                  type: bytea
                  remarks: |-
                    A byte array of the serialized attribues.
              - addPrimaryKey:
                  constraintName: pk_principal_id
                  tableName: sessions
                  columnNames: ["principal_id"]
        - createIndex:
            tableName: sessions
            columns:
              - column:
                  name: principal_id
            indexName: principal_id_session_index
        - createIndex:
            tableName: sessions
            columns:
              - column:
                  name: session_id
            indexName: session_id_session_index
  - changeSet:
      id: 2
      author: Patrick Magee
      changes:
        - createTable:
            tableName: user_credentials
            columns:
              - column:
                  name: principal_id
                  type: varchar
                  constraints:
                    nullable: false
                  remarks: |-
                    The Unique Id tied to this user access, potentially spanning multiple sessions
              - column:
                  name: authorization_id
                  type: varchar
                  constraints:
                    nullable: false
                  remarks: |-
                    The authorization id for a resource
              - column:
                  name: expiration_time
                  type: timestamp
                  remarks: the time this credential will expire
              - column:
                  name: creation_time
                  type: timestamp
                  remarks: the time this credential was first created
              - column:
                  name: token
                  type: varchar
                  remarks: the actual token for a user
              - addPrimaryKey:
                  constraintName: pk_principal_id_authorization_id_credentials
                  tableName: sessions
                  columnNames: ["principal_id","authorization_id"]